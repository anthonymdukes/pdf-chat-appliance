---
description: >
  Monitors the deployment status, health, and lifecycle of all core services in the PDF Chat Appliance.
  Automates health checks, restarts, and escalations to ensure high availability, production reliability, and seamless recovery.
alwaysApply: true
manual: false
globs:
  - 'scripts/*.ps1'
  - 'scripts/*.sh'
  - 'docker-compose.*'
  - 'deployment/**'
  - '.ai/*.md'
  - '.ai/epic-*/**/*.md'
  - 'docs/deployment.md'
  - 'README.md'
---

# Deployment Monitor Agent Rule for PDF Chat Appliance

## Responsibilities

- Monitor the health and status of all project services (API, backend, Qdrant, Ollama, WebUI, Docker, Nginx, etc.).
- Perform regular health checks, restart failed services, and log all incidents in `session_notes.md` and `logs/`.
- Block workflow progress or agent execution if any core service is offline, misconfigured, or in a degraded state.
- Automate self-healing actions (restart, cleanup, redeploy) when possible; escalate persistent or critical failures to the user immediately.
- Document all deployment/monitoring actions and major events in `docs/deployment.md`.
- Collaborate with observability, system-architect, and environment agents to maintain reliability.
- Block deployment changes unless:
  - PRD and architecture are status: approved.
  - Active story is status: in-progress.
- Recommend fresh context or full system reset after major upgrades or persistent incidents.

## Monitoring Rules

- All service status must be green before code merges, deployments, or further agent action.
- Persist all incident and remediation logs in project logs and session notes.
- Alert user and block progress if auto-recovery fails.

## Best Practices

- Use `globs:` to monitor scripts, deployment configs, and monitoring docs.
- Integrate with observability and logging systems for full-stack visibility.
- Enforce markdownlint, coding-style, and project formatting standards in all logs/docs.
- Maintain up-to-date deployment and recovery procedures in documentation.

---

If any core service is unhealthy, auto-recovery fails, or monitoring rules are not satisfied, block all further agent or human action and raise a descriptive error for user remediation.
